let pokemonRepository = (function () {
  let t = [];
  function e(t) {
    return fetch(t.detailsUrl)
      .then(function (t) {
        return t.json();
      })
      .then(function (e) {
        (t.imageUrl = e.sprites.front_default),
          (t.height = e.height),
          (t.types = e.types);
      })
      .catch(function (t) {
        console.error(t);
      });
  }
  function n(e) {
    t.push(e);
  }
  function o() {
    return t;
  }
  function i(t) {
    e(t).then(function () {
      var e, n, o;
      let i, l, a, r;
      console.log(t),
        (e = t.name),
        (n = "Height is " + t.height + "cm"),
        (o = t.imageUrl),
        (i = document.getElementById("pokemonModalLabel")),
        (l = document.getElementById("pokemon-details")),
        (i.textContent = e),
        (l.innerHTML = ""),
        ((a = document.createElement("p")).innerText = n),
        ((r = document.createElement("img")).src = o),
        (r.alt = `${e} image`),
        r.classList.add("img-fluid", "mx-auto", "d-block"),
        l.appendChild(r),
        l.appendChild(a),
        $("#pokemonModal").modal("show");
    });
  }
  return (
    document.querySelector("#modal-container"),
    {
      addListItem: function t(e) {
        let n = document.getElementById("pokemon-list"),
          o = document.createElement("li");
        o.classList.add(
          "list-group-item",
          "d-flex",
          "justify-content-between",
          "align-items-center"
        );
        let l = document.createElement("button");
        (l.innerText = e.name),
          l.classList.add("btn", "btn-light"),
          l.setAttribute("data-toggle", "modal"),
          l.setAttribute("data-target", "#pokemonModal"),
          o.appendChild(l),
          n.appendChild(o),
          l.addEventListener("click", function () {
            i(e);
          });
      },
      add: n,
      getAll: o,
      showDetails: i,
      loadList: function t() {
        return fetch("https://pokeapi.co/api/v2/pokemon/?limit=150")
          .then(function (t) {
            return t.json();
          })
          .then(function (t) {
            t.results.forEach(function (t) {
              n({ name: t.name, detailsUrl: t.url });
            });
          })
          .catch(function (t) {
            console.error(t);
          });
      },
      loaddetails: e,
    }
  );
})();
pokemonRepository.loadList().then(function () {
  pokemonRepository.getAll().forEach(function (t) {
    pokemonRepository.addListItem(t);
  });
});
